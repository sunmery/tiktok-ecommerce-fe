import{a2 as h}from"./index-0_AJGUiB.js";var a={},d={},g;function v(){return g||(g=1,Object.defineProperty(d,"__esModule",{value:!0})),d}var c={},f;function w(){if(f)return c;f=1,Object.defineProperty(c,"__esModule",{value:!0}),c.AuthCallback=void 0;const s=h();let l=class extends s.Component{constructor(){super(...arguments),this.signin=()=>{const{sdk:t,serverUrl:n,isGetTokenSuccessful:e,saveTokenFromResponse:r}=this.props;t.signin(n).then(i=>{e(i)?(window!==window.parent&&this.sendSuccessfulLoginMessage(),r&&r(i)):window!==window.parent&&this.sendLoginFailureMessage()})},this.sendSuccessfulLoginMessage=()=>{const t={tag:"Casdoor",type:"SilentSignin",data:"success"};window.parent.postMessage(t,"*")},this.sendLoginFailureMessage=()=>{const t={tag:"Casdoor",type:"SilentSignin",data:"login-failure"};window.parent.postMessage(t,"*")}}UNSAFE_componentWillMount(){this.signin()}render(){return s.createElement(s.Fragment,null)}};return c.AuthCallback=l,c}var o={},S;function b(){if(S)return o;S=1,Object.defineProperty(o,"__esModule",{value:!0}),o.isSilentSigninRequired=o.SilentSignin=void 0;const s=h();let l=class extends s.Component{constructor(){super(...arguments),this.listenForSilentSigninEvents=()=>{const{handleReceivedSilentSigninSuccessEvent:n,handleReceivedSilentSigninFailureEvent:e}=this.props;window.addEventListener("message",r=>{const i=r.data;i.tag!=="Casdoor"||i.type!=="SilentSignin"||(i.data==="success"?n&&n(i):e&&e(i))})}}componentDidMount(){this.listenForSilentSigninEvents()}render(){const{isLoggedIn:n,sdk:e}=this.props;return window!==window.parent||n()?null:s.createElement("iframe",{id:"iframeTask",src:`${e.getSigninUrl()}&silentSignin=1`,style:{display:"none"},frameBorder:"no"})}};o.SilentSignin=l;function u(){return new URLSearchParams(window.location.search).get("silentSignin")==="1"}return o.isSilentSigninRequired=u,o}var p;function m(){return p||(p=1,function(s){var l=a&&a.__createBinding||(Object.create?function(t,n,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(t,r,i)}:function(t,n,e,r){r===void 0&&(r=e),t[r]=n[e]}),u=a&&a.__exportStar||function(t,n){for(var e in t)e!=="default"&&!Object.prototype.hasOwnProperty.call(n,e)&&l(n,t,e)};Object.defineProperty(s,"__esModule",{value:!0}),u(v(),s),u(w(),s),u(b(),s)}(a)),a}var y=m();export{y as l};
