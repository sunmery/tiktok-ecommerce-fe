{"version":3,"file":"exhaustive-deps.utils.cjs","sources":["../../../../src/rules/exhaustive-deps/exhaustive-deps.utils.ts"],"sourcesContent":["import { AST_NODE_TYPES } from '@typescript-eslint/utils'\nimport { ASTUtils } from '../../utils/ast-utils'\nimport type { TSESLint, TSESTree } from '@typescript-eslint/utils'\n\nexport const ExhaustiveDepsUtils = {\n  isRelevantReference(params: {\n    sourceCode: Readonly<TSESLint.SourceCode>\n    reference: TSESLint.Scope.Reference\n    scopeManager: TSESLint.Scope.ScopeManager\n    node: TSESTree.Node\n  }) {\n    const { sourceCode, reference, scopeManager, node } = params\n    const component = ASTUtils.getFunctionAncestor(sourceCode, node)\n\n    if (component === undefined) {\n      return false\n    }\n\n    if (\n      !ASTUtils.isDeclaredInNode({\n        scopeManager,\n        reference,\n        functionNode: component,\n      })\n    ) {\n      return false\n    }\n\n    return (\n      reference.identifier.name !== 'undefined' &&\n      reference.identifier.parent.type !== AST_NODE_TYPES.NewExpression &&\n      !ExhaustiveDepsUtils.isInstanceOfKind(reference.identifier.parent) &&\n      !ExhaustiveDepsUtils.isQueryClientReference(reference)\n    )\n  },\n  isInstanceOfKind(node: TSESTree.Node) {\n    return (\n      node.type === AST_NODE_TYPES.BinaryExpression &&\n      node.operator === 'instanceof'\n    )\n  },\n  isQueryClientReference(reference: TSESLint.Scope.Reference) {\n    const declarator = reference.resolved?.defs[0]?.node\n\n    return (\n      declarator?.type === AST_NODE_TYPES.VariableDeclarator &&\n      declarator.init?.type === AST_NODE_TYPES.CallExpression &&\n      declarator.init.callee.type === AST_NODE_TYPES.Identifier &&\n      declarator.init.callee.name === 'useQueryClient'\n    )\n  },\n}\n"],"names":["ASTUtils","AST_NODE_TYPES"],"mappings":";;;;AAIO,MAAM,sBAAsB;AAAA,EACjC,oBAAoB,QAKjB;AACD,UAAM,EAAE,YAAY,WAAW,cAAc,KAAS,IAAA;AACtD,UAAM,YAAYA,SAAA,SAAS,oBAAoB,YAAY,IAAI;AAE/D,QAAI,cAAc,QAAW;AACpB,aAAA;AAAA,IAAA;AAIP,QAAA,CAACA,kBAAS,iBAAiB;AAAA,MACzB;AAAA,MACA;AAAA,MACA,cAAc;AAAA,IAAA,CACf,GACD;AACO,aAAA;AAAA,IAAA;AAIP,WAAA,UAAU,WAAW,SAAS,eAC9B,UAAU,WAAW,OAAO,SAASC,MAAe,eAAA,iBACpD,CAAC,oBAAoB,iBAAiB,UAAU,WAAW,MAAM,KACjE,CAAC,oBAAoB,uBAAuB,SAAS;AAAA,EAEzD;AAAA,EACA,iBAAiB,MAAqB;AACpC,WACE,KAAK,SAASA,MAAAA,eAAe,oBAC7B,KAAK,aAAa;AAAA,EAEtB;AAAA,EACA,uBAAuB,WAAqC;;AAC1D,UAAM,cAAa,qBAAU,aAAV,mBAAoB,KAAK,OAAzB,mBAA6B;AAEhD,YACE,yCAAY,UAASA,qBAAe,wBACpC,gBAAW,SAAX,mBAAiB,UAASA,MAAAA,eAAe,kBACzC,WAAW,KAAK,OAAO,SAASA,qBAAe,cAC/C,WAAW,KAAK,OAAO,SAAS;AAAA,EAAA;AAGtC;;"}